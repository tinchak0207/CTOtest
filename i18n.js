const translations = {
    en: {
        nav: {
            home: "Home",
            events: "Events",
            courses: "Courses",
            competitions: "Competitions",
            about: "About"
        },
        header: {
            login: "Student Login"
        },
        hero: {
            title: "Macau Productivity and Technology Transfer Center",
            subtitle: "Event Registration Platform for Professional Development",
            searchPlaceholder: "Search for courses, events, or competitions..."
        },
        categories: {
            title: "Course Categories",
            viewMore: "View Courses",
            it: {
                title: "Information Technology",
                desc: "Cloud computing, programming, cybersecurity, and more"
            },
            fashion: {
                title: "Fashion & Creativity",
                desc: "Design, fashion, creative arts, and innovation"
            },
            language: {
                title: "Business Language",
                desc: "English, Chinese, Portuguese for business"
            },
            management: {
                title: "Enterprise Management",
                desc: "Business operations, management, and strategy"
            }
        },
        events: {
            title: "Upcoming Events & Courses"
        },
        filter: {
            allCategories: "All Categories",
            allTypes: "All Types",
            course: "Course",
            seminar: "Seminar",
            competition: "Competition",
            exam: "Examination",
            apply: "Apply Filters"
        },
        pagination: {
            page: "Page",
            of: "of"
        },
        partnerships: {
            title: "Our Technology Partners",
            huawei: "Technology training partnership since 2021",
            alibaba: "Cloud certification partnership since 2022",
            vqa: "China National Vocational Qualification Assessment"
        },
        about: {
            title: "About CPTTM",
            founding: "The Macau Productivity and Technology Transfer Center (CPTTM) was founded in 1996 as a non-profit organization jointly established by the Macau SAR Government and the private sector.",
            mission: "Our mission is to support enterprises to utilize effectively new conceptual thinking, information and resources in order to increase the value-added of its products or services, with the aim to promote higher productivity and stronger competitiveness.",
            stats: {
                courses: "Courses Annually",
                years: "Years of Service",
                students: "Students Trained"
            }
        },
        footer: {
            contact: {
                title: "Contact Us",
                address: "Macau, China"
            },
            links: {
                title: "Quick Links",
                events: "Event Registration",
                courses: "Course Catalog",
                competitions: "Competitions",
                vqa: "Vocational Qualification"
            },
            systems: {
                title: "Related Systems",
                register: "register.cpttm.org.mo",
                www2: "www2.cpttm.org.mo",
                main: "www.cpttm.org.mo"
            },
            social: {
                title: "Follow Us"
            },
            rights: "All rights reserved."
        },
        login: {
            title: "Student Login",
            username: "Username or Email",
            password: "Password",
            submit: "Login",
            forgot: "Forgot Password?",
            register: "Register Account"
        },
        eventCard: {
            seatsAvailable: "seats available",
            limitedSeats: "Limited seats!",
            fullyBooked: "Fully booked",
            register: "Register",
            viewDetails: "View Details"
        },
        eventDetail: {
            date: "Date",
            time: "Time",
            location: "Location",
            instructor: "Instructor",
            duration: "Duration",
            language: "Language",
            fee: "Fee",
            seats: "Available Seats",
            register: "Register Now",
            share: "Share Event"
        }
    },
    zh: {
        nav: {
            about: "關於生產力中心",
            training: "培訓",
            competitions: "比賽",
            seminars: "研討會",
            contact: "聯絡我們"
        },
        language: "Language",
        professional_training: {
            title: "專業培訓",
            it: "資訊科技",
            management_certification: "管理及認證",
            culture_creativity: "文化創意",
            professional_exams: "專業考試"
        },
        sme_services: "中小企服務",
        latest_news: {
            title: "最新消息",
            fashion_festival_feast: {
                title: "服裝節打造跨界創意盛宴 灣區時尚匯聚澳門",
                date: "2025.10.23 新聞稿",
                content: "由澳門生產力暨科技轉移中心與招商投資促進局合辦的“澳門服裝節2025”，今(23)日於澳門威尼斯人佛羅倫斯會議廳精彩續演，“大灣區時尚匯演”匯聚澳門、香港、深圳及廣州六組優秀設計師，攜手引領觀眾探索粵港澳大灣區（下稱“大灣區”）文化的時尚之旅。\n\n參與“大灣區時尚匯演”演出的設計師包括：澳門的陳慧珍、黃敏儀；深圳的羅少彬；廣州的林少華；香港的曾志豐，以及設計組合唐浩彬與梁皓琳。六組設計師共展出58套具當地文化特色的服裝作品，展現大灣區多元文化共融的設計力量。 …"
            },
            new_quality_productivity_703: {
                title: "第703期新質生產力",
                content: "【最新一期】第703期澳門日報新質生產力半月刊內容：\n\n– 【企業專訪】愛達利跨越發展賦能百業\n\n– 【1+4動態】深化GMP實踐：賦能澳門醫藥產業邁向國際新里程\n\n– 【時尚創意及技術篇】生產力為婚慶行業發展育人才\n\n– 【ISO發佈】ISO 22002-4:2025食品安全前提方案 第4部分：食品包材製造\n\n– 商務特選課程\n\n文章連結：https://www.macaodaily.com/html/2025-10/23/node_44.htm"
            },
            fashion_festival_opening: {
                title: "澳門服裝節拉開帷幕 融合科技與時尚創意",
                date: "2025.10.22 新聞稿",
                content: "由澳門生產力暨科技轉移中心與招商投資促進局合辦的“澳門服裝節2025”於今(22)日正式揭幕。活動由即日起一連四日，假澳門威尼斯人佛羅倫斯會議廳舉行，呈獻澳門時尚設計新作。開幕式以機械科技元素為載體，結合六位本澳新銳時裝設計師的創意，打造融合時尚與科技的表演，共同感受跨界時尚魅力。\n\n同日，文化局“當下・型匯”時裝設計樣版製作補助計劃作品匯演緊接登場。匯演展出“第十一屆時裝設計樣版製作補助計劃”獲選設計師的56套精彩作品，包括風格鮮明的男女裝及休閒服飾等，獲得時裝業界與現場觀眾一致好評。參與設計師包括：參與匯演的設計師包括：黃志源、梁敏婷、丁珍、吳家煒、黃敏儀、李惠晶及黃思穎。 …"
            },
            fashion_festival_wednesday: {
                title: "澳門服裝節周三揭幕以“時尚旅程”展原創魅力",
                date: "2025.10.20 新聞稿",
                content: "“澳門服裝節2025”（下稱“服裝節”）將於2025年10月22日至25日假澳門威尼斯人度假村佛羅倫斯會議廳，與第三十屆澳門國際貿易投資展覽會（MIF）同期舉行。本屆服裝節由澳門生產力暨科技轉移中心與招商投資促進局合辦，以“時尚旅程”為主題，透過一系列時裝匯演、分享會及展覽，並首設機械人時裝秀，引領觀眾深入探索澳門及粵港澳大灣區（下稱“大灣區”）品牌的創意脈絡與文化故事。 …"
            },
            typhoon_prevention_measures: {
                title: "生產力中心經科局籲商戶做好防風防浸措施",
                date: "2025.10.20 新聞稿 生產力中心/經科局",
                content: "地球物理氣象局預料，受熱帶氣旋“風神”影響，本澳今 (20) 日下午6時至8時將發出三號風球，本澳風勢會進一步增強，內港低窪地區可能會出現輕微水浸。\n\n澳門生產力暨科技轉移中心與經濟及科技發展局呼籲各商戶，特別是位處低窪地區的中小企業，應密切留意氣象部門發佈的最新天氣情況，按需要及時做好防風防浸的準備工作及預防措施，以免造成貨物及設備損失。同時呼籲已安裝防浸設備的商戶，檢查防洪門閘板和配件是否齊全，熟習防洪門的安拆步驟；已安裝防浸升降台和水泵的商戶，檢查設備是否正常運作。如有疑問，應盡快向所屬的工程公司或供應商了解，做好準備，以策萬全。 …"
            },
            specialty_store_subsidy: {
                title: "“專精特色店資助計劃”首輪明（21）日起接受企業申請",
                date: "2025.10.20 新聞稿 生產力中心/經科局",
                content: "為協助本澳中小企業轉型升級，向專業化、精品化及特色化發展，增強整體競爭力，工商業發展基金委託澳門生產力暨科技轉移中心（下稱“生產力中心”）執行的第一輪“專精特色店資助計劃”，將於明（21）日至2025年12月2日接受申請，首輪申請期設有100個名額。為協助企業了解計劃內容，生產力中心將於10月30日舉行企業說明會，歡迎有興趣的企業報名參加。\n\n是次資助計劃的對象為餐飲或零售業的中小企業，獲評定為“專精特色店”的中小企業，就其線上營銷、打造特色店面以及推出IP聯乘商品等指定費用，可獲六成資助，最高資助上限為15萬澳門元。有意申請的企業須具備“誠信店”資格，並提交自行擬訂的商業計劃書及經營方案。  …"
            },
            typhoon_prevention_measures_2: {
                title: "生產力中心經科局籲商戶做好防風防浸措施",
                date: "2025.10.20新聞稿 生產力中心/經科局",
                content: "地球物理氣象局預料，受熱帶氣旋“風神”影響，本澳今 (20) 日下午6時至8時將發出三號風球，本澳風勢會進一步增強，內港低窪地區可能會出現輕微水浸。\n\n澳門生產力暨科技轉移中心與經濟及科技發展局呼籲各商戶，特別是位處低窪地區的中小企業，應密切留意氣象部門發佈的最新天氣情況，按需要及時做好防風防浸的準備工作及預防措施，以免造成貨物及設備損失。同時呼籲已安裝防浸設備的商戶，檢查防洪門閘板和配件是否齊全，熟習防洪門的安拆步驟；已安裝防浸升降台和水泵的商戶，檢查設備是否正常運作。如有疑問，應盡快向所屬的工程公司或供應商了解，做好準備，以策萬全。 …"
            },
            gs1_platform_launch: {
                title: "澳門編碼協會舉辦新平台發佈會  以全球標準助力澳門產品條碼數字化升級",
                date: "2025.10.13 新聞稿",
                content: "中國澳門物品編碼協會今（13）日舉行“my GS1 CODES”平台（下稱“我的GS1平台”）發佈會暨會員工作坊，協會領導架構成員、會員企業代表齊聚一堂，共同見證平台啟用。\n\n為配合國際物品編碼組織（下稱“GS1”）的發展願景，進一步推動產品資料數字化，助力會員企業以可靠準確的產品資訊提高品牌認知度，在澳門生產力暨科技轉移中心（下稱“生產力中心”）的支持下，中國澳門物品編碼協會全新推出“我的GS1平台”，在原有“澳門產品目錄電子平台”的基礎上進行全面升級和優化，旨在為本地企業提供更高效的數字化展示窗口，以更智能、高效、專業的方式為會員提供服務，助力企業拓展市場、把握商機。 …"
            },
            smart_fashion_seminar: {
                title: "2025.10.25 – 智能時尚：機械人驅動未來分享會",
                content: "網上報名"
            },
            building_management_seminar: {
                title: "樓宇管理線上專題講座",
                content: "樓宇管理線上專題講座 – 樓宇供電系統安全須知 (SEM27-10-2025-SMTA)\n講座日期：2025年10月31日，19:30-20:30\n報名日期：10月13日至10月28日"
            },
            huawei_training_ceremony: {
                title: "“華為數字化人才基礎研修計劃” 開班儀式順利舉行",
                date: "勞工事務局 2025.10.09",
                content: "由澳門特別行政區政府勞工事務局（下稱“勞工局”）與橫琴粵澳深度合作區民生事務局（下稱“民生局”）聯合主辦，華為服務（香港）有限公司-澳門分公司（下稱“華為澳門”）支持，澳門生產力暨科技轉移中心（下稱“生產力中心”）承辦的“華為數字化人才基礎研修計劃”開班儀式今日（9日）上午在澳門生產力暨科技轉移中心總辦事處演講廳順利舉行。\n\n勞工局局長陳元童、副局長陳子慧、華為澳門總經理金本，以及生產力中心理事長關治平出席活動，共同見證30名澳門青年正式開展為期四周的數字化研修的學習之旅。 …"
            },
            pharma_upgrade_plan: {
                title: "生產力中心推“促進澳門醫藥產業升級發展鼓勵計劃”",
                date: "2025.10.08 新聞稿",
                content: "澳門生產力暨科技轉移中心（下稱“生產力中心”）今（8）日舉行“促進澳門醫藥產業升級發展鼓勵計劃”發佈會，介紹即將於12月開放申請的“GMP認證鼓勵計劃”及“中成藥本地註冊鼓勵計劃”。\n\n生產力中心理事長關治平、支持單位代表藥物監督管理局副局長吳國良、經濟及科技發展局科技廳廳長翁年輝，以及多家澳門藥廠均有派員出席。\n\n“促進澳門醫藥產業升級發展鼓勵計劃”（下稱“計劃”）是響應特區政府經濟適度多元發展策略，重點支持大健康產業升級的舉措。計劃包含兩方面的措施，一是GMP認證鼓勵，將為成功取得澳門GMP，即“藥物生產質量管理規範”認證的澳門藥廠，提供300萬澳門元的鼓勵，以降低企業進行廠房升級和技術改造的投資壓力，助力澳門藥廠參與大灣區乃至國際市場的競爭。 …"
            },
            fashion_festival_mif: {
                title: "澳門服裝節亮相第卅屆MIF",
                content: "展澳門原創    促灣區合作\n\n    由澳門生產力暨科技轉移中心與招商投資促進局合辦的年度時尚盛事“澳門服裝節二○二五”，將於十月廿二日至廿五日在澳門威尼斯人——佛羅倫斯會議廳舉行。本屆服裝節以“時尚旅程”為主題，旨在向公眾展示更多澳門原創設計品牌，展現澳門時尚活力，以及進一步促進大灣區時尚產業的交流合作。\n\n    “澳門服裝節二○二五”將與“第三十屆澳門國際貿易投資展覽會”(MIF)同期舉行，匯聚來自大灣區多個城市的設計師和品牌。活動期間將舉辦八場專業時裝表演。活動首日將舉行隆重的開幕式，並以“‘當下 · 型匯’時装設計樣板製作補貼計劃作品匯演”揭開序幕，集中展示七位本地設計師的最新系列作品。 …"
            },
            new_quality_productivity_702: {
                title: "第702期新質生產力",
                content: "【最新一期】第702期澳門日報新質生產力半月刊內容：\n\n– 【M嘜專欄】分子態守正創新推中醫藥現代化\n\n– 【1+4動態】跨境電商與數據驗證齊發力 助中小企業迎商機\n\n– 【時尚創意及技術篇】澳門服裝節亮相第卅屆MIF\n\n– 【ISO發佈】ISO 22002-2:2025 食品安全前提方案 第2部分：餐飲服務\n\n– 商務特選課程\n\n文章連結：https://www.macaodaily.com/html/2025-08/21/node_48.htm"
            },
            typhoon_cancellation: {
                title: "因颱風關係，中心於十月五日下午原定舉辦的所有課程、考試及其他活動宣佈取消"
            }
        },
        more_latest_news: "更多最新消息",
        seminars: "研討會",
        competitions: "比賽",
        videos: "短片",
        twenty_fifth_anniversary: "25周年",
        diversified_productivity: "多元生產力",
        search: {
            label: "Search for:",
            placeholder: "檢索生產力中心的培訓課程"
        },
        recent_courses: {
            title: "最近課程",
            workplace_conflict_mediation: "善用調解技巧處理職場衝突",
            personalized_clothing_production: "個人化服裝製作",
            business_english_conversation_1: "服務行業商業英語會話 - I",
            one_pos_retail_management: "創業/中小企經營系列 : 小企業「零售易」- ONE-POS零售管理系統使用簡介班",
            illustrator_for_advertising: "為廣告業而設的Illustrator 圖形設計",
            womens_pattern_making: "女裝紙樣製作及縫製 (小圓領長袖外套)",
            canva_for_social_media: "Canva網絡媒體宣傳設計課程",
            cqi_irca_iso_27001_auditor: "CQI IRCA認可 ISO/IEC 27001:2022主任審核工作坊",
            brand_building_strategy: "創業/中小企經營系列：品牌建立攻略",
            trade_management_practices: "創業/中小企經營系列：貿易管理實務"
        },
        more_course_info: "更多課程資訊",
        publications: {
            title: "期刊",
            international_management_standard: "國際管理標準快訊",
            it_newsletter: "IT 快訊",
            cfi_newsletter: "衣訊"
        },
        bay_area: {
            alliance: "粵港澳大灣区生產力促進服務聯盟",
            new_quality_productivity: "新質生產力",
            standards_reports: "灣區標準和研究報告"
        },
        cpttm_25th_anniversary: "生產力中心25周年",
        economic_finance: {
            title: "經濟財政範疇",
            specialty_stores: "專精特色店",
            cybersecurity_training_platform: "網絡安全員工培訓平台",
            policy_address_2025_video: "2025施政報告動畫宣傳片",
            sme_digital_support_2025: "2025 中小企業數字化支援服務",
            catering_intelligent_upgrade: "澳門餐飲業智能升級先導計劃",
            sme_digital_support_2024: "2024中小企業數字化支援服務",
            macau_25th_anniversary_data: "數說澳門回歸25年",
            economic_diversification_plan: "澳門特別行政區經濟適度多元發展規劃（ 2 0 2 4 – 2 0 2 8 年）專頁",
            economic_diversification_plan_2: "經濟適度多元發展規劃",
            macao_courtesy_campaign: "澳門有禮運動",
            food_hygiene_supervisor_scheme: "食品衛生督導員鼓勵計劃",
            hengqin_cooperation_zone: "橫琴粵澳深度合作區",
            simple_pay: "聚易用",
            it_talent_certification_rewards: "資訊技術人才專業認證獎勵計劃"
        },
        student_login: "學員登入",
        management_certification: {
            title: "管理及認證",
            standards_certification: "標準及認證",
            business_management: "營商管理",
            training_exams: "培訓及考試",
            professional_training: "專業培訓",
            professional_exams: "專業考試",
            library_resources: "圖書及學習資源"
        },
        it_application: {
            title: "資訊科技和IT應用",
            information_technology: "資訊科技"
        },
        sme_support: {
            title: "中小企支援",
            sme_services: "中小企服務",
            specialty_store_subsidy_plan: "專精特色店資助計劃",
            flood_prevention_maintenance: "中小企業防浸設備維修保養知多D",
            sme_digital_support_2024: "2024 中小企業數字化支援服務",
            sme_digital_support_2025: "2025 中小企業數字化支援服務",
            catering_intelligent_upgrade_plan: "澳門餐飲業智能升級先導計劃"
        },
        culture_creativity_industry: {
            title: "文化創意及工業",
            maconsef_intro: "CPTTM 時裝孵化計劃簡介 (MaConsef)",
            fashion_image_info: "時裝及形象資訊",
            macao_fashion_brands: "澳門時尚品牌"
        },
        knowledge_exchange: {
            title: "知識交流",
            seminars_workshops: "研討會/工作坊",
            new_quality_productivity: "新質生產力",
            corporate_interviews: "企業專訪"
        },
        center_info: {
            title: "中心資訊",
            about_us: "中心簡介",
            visits_exchanges: "訪問和交流",
            affiliated_organizations: "參與的組織",
            contact_us: "聯絡我們",
            press_releases: "新聞稿"
        },
        recruitment_procurement: {
            title: "招聘及採購資訊",
            job_vacancies: "職位空缺",
            procurement_info: "採購資訊",
            tenders: "招標項目"
        },
        footer: {
            motto: "終身學習 自我增值 提升你我生產力",
            motto_en: "Lifelong Learning for Continuous Upgrading to Enhance Productivity",
            copyright: "Copyright © 2025 澳門生產力暨科技轉移中心 - 收集個人資料聲明"
        }
    },
    pt: {
        nav: {
            home: "Início",
            events: "Eventos",
            courses: "Cursos",
            competitions: "Competições",
            about: "Sobre"
        },
        header: {
            login: "Login de Estudante"
        },
        hero: {
            title: "Centro de Produtividade e Transferência de Tecnologia de Macau",
            subtitle: "Plataforma de Registo de Eventos para Desenvolvimento Profissional",
            searchPlaceholder: "Pesquisar cursos, eventos ou competições..."
        },
        categories: {
            title: "Categorias de Cursos",
            viewMore: "Ver Cursos",
            it: {
                title: "Tecnologia da Informação",
                desc: "Computação em nuvem, programação, cibersegurança e mais"
            },
            fashion: {
                title: "Moda e Criatividade",
                desc: "Design, moda, artes criativas e inovação"
            },
            language: {
                title: "Língua de Negócios",
                desc: "Inglês, chinês, português para negócios"
            },
            management: {
                title: "Gestão Empresarial",
                desc: "Operações comerciais, gestão e estratégia"
            }
        },
        events: {
            title: "Eventos e Cursos Próximos"
        },
        filter: {
            allCategories: "Todas as Categorias",
            allTypes: "Todos os Tipos",
            course: "Curso",
            seminar: "Seminário",
            competition: "Competição",
            exam: "Exame",
            apply: "Aplicar Filtros"
        },
        pagination: {
            page: "Página",
            of: "de"
        },
        partnerships: {
            title: "Nossos Parceiros Tecnológicos",
            huawei: "Parceria de formação tecnológica desde 2021",
            alibaba: "Parceria de certificação em nuvem desde 2022",
            vqa: "Avaliação de Qualificação Profissional Nacional da China"
        },
        about: {
            title: "Sobre o CPTTM",
            founding: "O Centro de Produtividade e Transferência de Tecnologia de Macau (CPTTM) foi fundado em 1996 como uma organização sem fins lucrativos estabelecida conjuntamente pelo Governo da RAEM e pelo setor privado.",
            mission: "Nossa missão é apoiar empresas a utilizar efetivamente novo pensamento conceitual, informação e recursos para aumentar o valor agregado de seus produtos ou serviços, com o objetivo de promover maior produtividade e competitividade.",
            stats: {
                courses: "Cursos Anuais",
                years: "Anos de Serviço",
                students: "Estudantes Formados"
            }
        },
        footer: {
            contact: {
                title: "Contacte-nos",
                address: "Macau, China"
            },
            links: {
                title: "Links Rápidos",
                events: "Registo de Eventos",
                courses: "Catálogo de Cursos",
                competitions: "Competições",
                vqa: "Qualificação Profissional"
            },
            systems: {
                title: "Sistemas Relacionados",
                register: "register.cpttm.org.mo",
                www2: "www2.cpttm.org.mo",
                main: "www.cpttm.org.mo"
            },
            social: {
                title: "Siga-nos"
            },
            rights: "Todos os direitos reservados."
        },
        login: {
            title: "Login de Estudante",
            username: "Nome de Usuário ou Email",
            password: "Senha",
            submit: "Entrar",
            forgot: "Esqueceu a Senha?",
            register: "Registar Conta"
        },
        eventCard: {
            seatsAvailable: "vagas disponíveis",
            limitedSeats: "Vagas limitadas!",
            fullyBooked: "Totalmente reservado",
            register: "Registar",
            viewDetails: "Ver Detalhes"
        },
        eventDetail: {
            date: "Data",
            time: "Hora",
            location: "Localização",
            instructor: "Instrutor",
            duration: "Duração",
            language: "Idioma",
            fee: "Taxa",
            seats: "Vagas Disponíveis",
            register: "Registar Agora",
            share: "Partilhar Evento"
        }
    }
};

let currentLang = 'en';

function translatePage() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const keys = element.getAttribute('data-i18n').split('.');
        let translation = translations[currentLang];
        
        for (const key of keys) {
            translation = translation[key];
            if (!translation) break;
        }
        
        if (translation) {
            element.textContent = translation;
        }
    });

    const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
    placeholderElements.forEach(element => {
        const keys = element.getAttribute('data-i18n-placeholder').split('.');
        let translation = translations[currentLang];
        
        for (const key of keys) {
            translation = translation[key];
            if (!translation) break;
        }
        
        if (translation) {
            element.placeholder = translation;
        }
    });
}

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('cpttm-lang', lang);
    
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
    
    translatePage();
    
    if (window.renderEvents) {
        window.renderEvents();
    }
}

function initI18n() {
    const savedLang = localStorage.getItem('cpttm-lang') || 'en';
    
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get('l');
    
    let initialLang = savedLang;
    if (urlLang === 'e') initialLang = 'en';
    else if (urlLang === 'c') initialLang = 'zh';
    else if (urlLang === 'p') initialLang = 'pt';
    
    setLanguage(initialLang);
    
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            setLanguage(btn.getAttribute('data-lang'));
        });
    });
}

function t(key) {
    const keys = key.split('.');
    let translation = translations[currentLang];
    
    for (const k of keys) {
        translation = translation[k];
        if (!translation) return key;
    }
    
    return translation;
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initI18n);
} else {
    initI18n();
}
