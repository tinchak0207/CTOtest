const translations = {
    en: {
        nav: {
            home: "Home",
            events: "Events",
            courses: "Courses",
            competitions: "Competitions",
            about: "About"
        },
        header: {
            login: "Student Login"
        },
        hero: {
            title: "Macau Productivity and Technology Transfer Center",
            subtitle: "Event Registration Platform for Professional Development",
            searchPlaceholder: "Search for courses, events, or competitions..."
        },
        categories: {
            title: "Course Categories",
            viewMore: "View Courses",
            it: {
                title: "Information Technology",
                desc: "Cloud computing, programming, cybersecurity, and more"
            },
            fashion: {
                title: "Fashion & Creativity",
                desc: "Design, fashion, creative arts, and innovation"
            },
            language: {
                title: "Business Language",
                desc: "English, Chinese, Portuguese for business"
            },
            management: {
                title: "Enterprise Management",
                desc: "Business operations, management, and strategy"
            }
        },
        events: {
            title: "Upcoming Events & Courses"
        },
        filter: {
            allCategories: "All Categories",
            allTypes: "All Types",
            course: "Course",
            seminar: "Seminar",
            competition: "Competition",
            exam: "Examination",
            apply: "Apply Filters"
        },
        pagination: {
            page: "Page",
            of: "of"
        },
        partnerships: {
            title: "Our Technology Partners",
            huawei: "Technology training partnership since 2021",
            alibaba: "Cloud certification partnership since 2022",
            vqa: "China National Vocational Qualification Assessment"
        },
        about: {
            title: "About CPTTM",
            founding: "The Macau Productivity and Technology Transfer Center (CPTTM) was founded in 1996 as a non-profit organization jointly established by the Macau SAR Government and the private sector.",
            mission: "Our mission is to support enterprises to utilize effectively new conceptual thinking, information and resources in order to increase the value-added of its products or services, with the aim to promote higher productivity and stronger competitiveness.",
            stats: {
                courses: "Courses Annually",
                years: "Years of Service",
                students: "Students Trained"
            }
        },
        footer: {
            contact: {
                title: "Contact Us",
                address: "Macau, China"
            },
            links: {
                title: "Quick Links",
                events: "Event Registration",
                courses: "Course Catalog",
                competitions: "Competitions",
                vqa: "Vocational Qualification"
            },
            systems: {
                title: "Related Systems",
                register: "register.cpttm.org.mo",
                www2: "www2.cpttm.org.mo",
                main: "www.cpttm.org.mo"
            },
            social: {
                title: "Follow Us"
            },
            rights: "All rights reserved."
        },
        login: {
            title: "Student Login",
            username: "Username or Email",
            password: "Password",
            submit: "Login",
            forgot: "Forgot Password?",
            register: "Register Account"
        },
        eventCard: {
            seatsAvailable: "seats available",
            limitedSeats: "Limited seats!",
            fullyBooked: "Fully booked",
            register: "Register",
            viewDetails: "View Details"
        },
        eventDetail: {
            date: "Date",
            time: "Time",
            location: "Location",
            instructor: "Instructor",
            duration: "Duration",
            language: "Language",
            fee: "Fee",
            seats: "Available Seats",
            register: "Register Now",
            share: "Share Event"
        }
    },
    zh: {
        nav: {
            home: "首頁",
            events: "活動",
            courses: "課程",
            competitions: "競賽",
            about: "關於"
        },
        header: {
            login: "學員登入"
        },
        hero: {
            title: "澳門生產力暨科技轉移中心",
            subtitle: "專業發展活動報名平台",
            searchPlaceholder: "搜索課程、活動或競賽..."
        },
        categories: {
            title: "課程類別",
            viewMore: "查看課程",
            it: {
                title: "資訊科技",
                desc: "雲端運算、程式設計、網絡安全等"
            },
            fashion: {
                title: "時裝與創意",
                desc: "設計、時裝、創意藝術及創新"
            },
            language: {
                title: "商業語言",
                desc: "商業英語、中文、葡語"
            },
            management: {
                title: "企業管理",
                desc: "商業運營、管理及策略"
            }
        },
        events: {
            title: "即將舉行的活動與課程"
        },
        filter: {
            allCategories: "全部類別",
            allTypes: "全部類型",
            course: "課程",
            seminar: "研討會",
            competition: "競賽",
            exam: "考試",
            apply: "應用篩選"
        },
        pagination: {
            page: "頁面",
            of: "之"
        },
        partnerships: {
            title: "我們的技術合作夥伴",
            huawei: "自2021年起的技術培訓合作夥伴",
            alibaba: "自2022年起的雲端認證合作夥伴",
            vqa: "中國國家職業資格評估"
        },
        about: {
            title: "關於生產力中心",
            founding: "澳門生產力暨科技轉移中心（CPTTM）成立於1996年，是由澳門特別行政區政府與私營部門共同創立的非牟利組織。",
            mission: "我們的使命是支持企業有效利用新的概念思維、資訊和資源，以增加產品或服務的附加值，從而提高生產力和競爭力。",
            stats: {
                courses: "年度課程",
                years: "服務年限",
                students: "受訓學員"
            }
        },
        footer: {
            contact: {
                title: "聯繫我們",
                address: "中國澳門"
            },
            links: {
                title: "快速連結",
                events: "活動報名",
                courses: "課程目錄",
                competitions: "競賽",
                vqa: "職業資格"
            },
            systems: {
                title: "相關系統",
                register: "register.cpttm.org.mo",
                www2: "www2.cpttm.org.mo",
                main: "www.cpttm.org.mo"
            },
            social: {
                title: "關注我們"
            },
            rights: "版權所有。"
        },
        login: {
            title: "學員登入",
            username: "用戶名或電郵",
            password: "密碼",
            submit: "登入",
            forgot: "忘記密碼？",
            register: "註冊帳戶"
        },
        eventCard: {
            seatsAvailable: "個名額",
            limitedSeats: "名額有限！",
            fullyBooked: "已滿額",
            register: "報名",
            viewDetails: "查看詳情"
        },
        eventDetail: {
            date: "日期",
            time: "時間",
            location: "地點",
            instructor: "講師",
            duration: "時長",
            language: "語言",
            fee: "費用",
            seats: "可用名額",
            register: "立即報名",
            share: "分享活動"
        }
    },
    pt: {
        nav: {
            home: "Início",
            events: "Eventos",
            courses: "Cursos",
            competitions: "Competições",
            about: "Sobre"
        },
        header: {
            login: "Login de Estudante"
        },
        hero: {
            title: "Centro de Produtividade e Transferência de Tecnologia de Macau",
            subtitle: "Plataforma de Registo de Eventos para Desenvolvimento Profissional",
            searchPlaceholder: "Pesquisar cursos, eventos ou competições..."
        },
        categories: {
            title: "Categorias de Cursos",
            viewMore: "Ver Cursos",
            it: {
                title: "Tecnologia da Informação",
                desc: "Computação em nuvem, programação, cibersegurança e mais"
            },
            fashion: {
                title: "Moda e Criatividade",
                desc: "Design, moda, artes criativas e inovação"
            },
            language: {
                title: "Língua de Negócios",
                desc: "Inglês, chinês, português para negócios"
            },
            management: {
                title: "Gestão Empresarial",
                desc: "Operações comerciais, gestão e estratégia"
            }
        },
        events: {
            title: "Eventos e Cursos Próximos"
        },
        filter: {
            allCategories: "Todas as Categorias",
            allTypes: "Todos os Tipos",
            course: "Curso",
            seminar: "Seminário",
            competition: "Competição",
            exam: "Exame",
            apply: "Aplicar Filtros"
        },
        pagination: {
            page: "Página",
            of: "de"
        },
        partnerships: {
            title: "Nossos Parceiros Tecnológicos",
            huawei: "Parceria de formação tecnológica desde 2021",
            alibaba: "Parceria de certificação em nuvem desde 2022",
            vqa: "Avaliação de Qualificação Profissional Nacional da China"
        },
        about: {
            title: "Sobre o CPTTM",
            founding: "O Centro de Produtividade e Transferência de Tecnologia de Macau (CPTTM) foi fundado em 1996 como uma organização sem fins lucrativos estabelecida conjuntamente pelo Governo da RAEM e pelo setor privado.",
            mission: "Nossa missão é apoiar empresas a utilizar efetivamente novo pensamento conceitual, informação e recursos para aumentar o valor agregado de seus produtos ou serviços, com o objetivo de promover maior produtividade e competitividade.",
            stats: {
                courses: "Cursos Anuais",
                years: "Anos de Serviço",
                students: "Estudantes Formados"
            }
        },
        footer: {
            contact: {
                title: "Contacte-nos",
                address: "Macau, China"
            },
            links: {
                title: "Links Rápidos",
                events: "Registo de Eventos",
                courses: "Catálogo de Cursos",
                competitions: "Competições",
                vqa: "Qualificação Profissional"
            },
            systems: {
                title: "Sistemas Relacionados",
                register: "register.cpttm.org.mo",
                www2: "www2.cpttm.org.mo",
                main: "www.cpttm.org.mo"
            },
            social: {
                title: "Siga-nos"
            },
            rights: "Todos os direitos reservados."
        },
        login: {
            title: "Login de Estudante",
            username: "Nome de Usuário ou Email",
            password: "Senha",
            submit: "Entrar",
            forgot: "Esqueceu a Senha?",
            register: "Registar Conta"
        },
        eventCard: {
            seatsAvailable: "vagas disponíveis",
            limitedSeats: "Vagas limitadas!",
            fullyBooked: "Totalmente reservado",
            register: "Registar",
            viewDetails: "Ver Detalhes"
        },
        eventDetail: {
            date: "Data",
            time: "Hora",
            location: "Localização",
            instructor: "Instrutor",
            duration: "Duração",
            language: "Idioma",
            fee: "Taxa",
            seats: "Vagas Disponíveis",
            register: "Registar Agora",
            share: "Partilhar Evento"
        }
    }
};

let currentLang = 'en';

function translatePage() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const keys = element.getAttribute('data-i18n').split('.');
        let translation = translations[currentLang];
        
        for (const key of keys) {
            translation = translation[key];
            if (!translation) break;
        }
        
        if (translation) {
            element.textContent = translation;
        }
    });

    const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
    placeholderElements.forEach(element => {
        const keys = element.getAttribute('data-i18n-placeholder').split('.');
        let translation = translations[currentLang];
        
        for (const key of keys) {
            translation = translation[key];
            if (!translation) break;
        }
        
        if (translation) {
            element.placeholder = translation;
        }
    });
}

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('cpttm-lang', lang);
    
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-lang="${lang}"]`).classList.add('active');
    
    translatePage();
    
    if (window.renderEvents) {
        window.renderEvents();
    }
}

function initI18n() {
    const savedLang = localStorage.getItem('cpttm-lang') || 'en';
    
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get('l');
    
    let initialLang = savedLang;
    if (urlLang === 'e') initialLang = 'en';
    else if (urlLang === 'c') initialLang = 'zh';
    else if (urlLang === 'p') initialLang = 'pt';
    
    setLanguage(initialLang);
    
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            setLanguage(btn.getAttribute('data-lang'));
        });
    });
}

function t(key) {
    const keys = key.split('.');
    let translation = translations[currentLang];
    
    for (const k of keys) {
        translation = translation[k];
        if (!translation) return key;
    }
    
    return translation;
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initI18n);
} else {
    initI18n();
}
