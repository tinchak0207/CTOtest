<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>机器人学院 - 服务机器人应用开发在线学习平台</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
</head>
<body>
    <div class="layout">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="#4CAF50"/>
                        <path d="M16 8C13.8 8 12 9.8 12 12V14H10C9.4 14 9 14.4 9 15V23C9 23.6 9.4 24 10 24H22C22.6 24 23 23.6 23 23V15C23 14.4 22.6 14 22 14H20V12C20 9.8 18.2 8 16 8ZM18 14H14V12C14 10.9 14.9 10 16 10C17.1 10 18 10.9 18 12V14ZM15 20C14.4 20 14 19.6 14 19C14 18.4 14.4 18 15 18C15.6 18 16 18.4 16 19C16 19.6 15.6 20 15 20ZM17 20C16.4 20 16 19.6 16 19C16 18.4 16.4 18 17 18C17.6 18 18 18.4 18 19C18 19.6 17.6 20 17 20Z" fill="white"/>
                    </svg>
                    <h1>机器人学院</h1>
                </div>
                <nav class="header-nav">
                    <button class="nav-btn" data-view="home">首页</button>
                    <button class="nav-btn" data-view="learn">模块概览</button>
                    <button class="nav-btn nav-btn-featured" data-view="tutorial">📚 交互教程</button>
                    <button class="nav-btn" data-view="practice">练习</button>
                    <button class="nav-btn" data-view="exam">模拟考试</button>
                    <button class="nav-btn" data-view="progress">学习进度</button>
                    <button class="nav-btn" data-view="analytics">📊 数据分析</button>
                    <button class="nav-btn" data-view="review">📝 复盘回顾</button>
                    <button class="nav-btn" data-view="documents">📄 文档中心</button>
                </nav>
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="菜单">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"/>
                        <line x1="3" y1="6" x2="21" y2="6"/>
                        <line x1="3" y1="18" x2="21" y2="18"/>
                    </svg>
                </button>
                <div class="header-actions">
                    <div class="data-actions">
                        <button class="secondary-btn" id="exportDataBtn" title="导出所有学习数据">导出数据</button>
                        <button class="secondary-btn" id="importDataBtn" title="导入学习数据">导入数据</button>
                        <input type="file" id="importDataInput" accept="application/json" hidden>
                    </div>
                    <button class="theme-toggle" title="切换主题">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                            <line x1="1" y1="12" x2="3" y2="12"/>
                            <line x1="21" y1="12" x2="23" y2="12"/>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                        </svg>
                    </button>
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="搜索题目...">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="m21 21-4.35-4.35"/>
                        </svg>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home View -->
            <div class="view active" id="homeView">
                <div class="hero">
                    <h2>欢迎来到机器人学院</h2>
                    <p class="hero-subtitle">从零基础到满分，掌握服务机器人应用开发（中级）核心知识</p>
                    <div class="hero-stats">
                        <div class="stat-card">
                            <div class="stat-number">300</div>
                            <div class="stat-label">练习题</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">8</div>
                            <div class="stat-label">知识模块</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="progressPercent">0</div>
                            <div class="stat-label">完成进度</div>
                        </div>
                    </div>
                    <div class="hero-actions">
                        <button class="cta-btn" data-view="tutorial">进入交互教程</button>
                        <button class="secondary-btn" data-view="learn">浏览模块概览</button>
                    </div>
                </div>

                <div class="categories-grid">
                    <h3>知识模块</h3>
                    <div id="categoriesContainer"></div>
                </div>
            </div>

            <!-- Learn View -->
            <div class="view" id="learnView">
                <div class="learn-layout">
                    <aside class="sidebar">
                        <h3>知识模块</h3>
                        <div id="learnSidebar"></div>
                    </aside>
                    <div class="learn-content">
                        <div id="learnContentArea"></div>
                    </div>
                </div>
            </div>

            <!-- Tutorial View -->
            <div class="view" id="tutorialView">
                <div class="tutorial-layout">
                    <aside class="sidebar">
                        <h3>学习路径</h3>
                        <div id="tutorialSidebar"></div>
                    </aside>
                    <div class="tutorial-content">
                        <div id="tutorialContentArea"></div>
                    </div>
                </div>
            </div>

            <!-- Practice View -->
            <div class="view" id="practiceView">
                <div class="practice-header">
                    <h2>智能练习</h2>
                    <div class="practice-filters">
                        <select id="categoryFilter">
                            <option value="">所有模块</option>
                        </select>
                        <select id="typeFilter">
                            <option value="">所有题型</option>
                            <option value="single">单选题</option>
                            <option value="multiple">多选题</option>
                            <option value="truefalse">判断题</option>
                        </select>
                        <label class="review-toggle">
                            <input type="checkbox" id="reviewOnly">
                            <span>仅看待复盘</span>
                        </label>
                        <button id="resetPractice" class="secondary-btn">重置进度</button>
                    </div>
                </div>
                <div id="practiceContent"></div>
            </div>

            <!-- Exam View -->
            <div class="view" id="examView">
                <div class="exam-container">
                    <div class="exam-header">
                        <h2>模拟考试</h2>
                        <div class="exam-timer" id="examTimer">00:00:00</div>
                    </div>
                    <div id="examContent">
                        <div class="exam-start">
                            <h3>准备开始模拟考试</h3>
                            <p>考试包含从所有模块随机抽取的30道题（单选10题、多选10题、判断10题）</p>
                            <p>建议用时：30分钟</p>
                            <button id="startExam" class="cta-btn">开始考试</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress View -->
            <div class="view" id="progressView">
                <div class="progress-container">
                    <h2>学习进度</h2>
                    <div class="progress-summary">
                        <div class="progress-card">
                            <h4>总体进度</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" id="overallProgress"></div>
                            </div>
                            <p><span id="completedCount">0</span> / 300 题已完成</p>
                        </div>
                        <div class="progress-card">
                            <h4>正确率</h4>
                            <div class="accuracy-display">
                                <span id="accuracyPercent">0</span>%
                            </div>
                            <p><span id="correctCount">0</span> / <span id="attemptedCount">0</span> 题正确</p>
                        </div>
                    </div>
                    <div class="category-progress">
                        <h3>各模块进度</h3>
                        <div id="categoryProgressList"></div>
                    </div>
                    <div class="recent-activity">
                        <h3>最近活动</h3>
                        <div id="recentActivityList"></div>
                    </div>
                </div>
            </div>

            <!-- Analytics View -->
            <div class="view" id="analyticsView">
                <div class="analytics-container">
                    <h2>📊 数据分析</h2>
                    <div class="analytics-summary">
                        <div class="analytics-card">
                            <h4>🔥 连续学习</h4>
                            <div class="analytics-number" id="streakDays">0</div>
                            <p>天</p>
                        </div>
                        <div class="analytics-card">
                            <h4>⏱️ 总学习时长</h4>
                            <div class="analytics-number" id="totalStudyTime">0</div>
                            <p>小时</p>
                        </div>
                        <div class="analytics-card">
                            <h4>📝 待复习题目</h4>
                            <div class="analytics-number" id="dueReviewCount">0</div>
                            <p>题</p>
                        </div>
                        <div class="analytics-card">
                            <h4>📚 笔记数量</h4>
                            <div class="analytics-number" id="notesCount">0</div>
                            <p>条</p>
                        </div>
                    </div>
                    <div class="analytics-charts">
                        <div class="chart-section">
                            <h3>学习趋势</h3>
                            <div id="studyTrendChart"></div>
                        </div>
                        <div class="chart-section">
                            <h3>知识点分布</h3>
                            <div id="knowledgeDistChart"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Review View -->
            <div class="view" id="reviewView">
                <div class="review-container">
                    <h2>📝 复盘回顾</h2>
                    <div class="review-tabs">
                        <button class="tab-btn active" data-tab="dueReview">待复习 (<span id="dueCount">0</span>)</button>
                        <button class="tab-btn" data-tab="notes">我的笔记 (<span id="noteCount">0</span>)</button>
                        <button class="tab-btn" data-tab="mistakes">错题集</button>
                    </div>
                    <div class="review-content">
                        <div class="review-tab-content active" id="dueReviewContent"></div>
                        <div class="review-tab-content" id="notesContent"></div>
                        <div class="review-tab-content" id="mistakesContent"></div>
                    </div>
                </div>
            </div>

            <!-- Documents View -->
            <div class="view" id="documentsView">
                <div class="documents-container">
                    <div class="documents-header">
                        <h2>📄 文档中心</h2>
                        <p class="documents-subtitle">上传学习资料，支持PDF、图片及OCR文字识别</p>
                    </div>
                    
                    <div class="upload-section">
                        <div class="upload-area" id="uploadArea">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17 8 12 3 7 8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                            <p class="upload-text">拖拽文件到此处或点击上传</p>
                            <p class="upload-hint">支持 PDF、JPG、PNG、JPEG 格式，单个文件最大 10MB</p>
                            <input type="file" id="documentInput" accept=".pdf,.jpg,.jpeg,.png" multiple hidden>
                            <button class="cta-btn" id="selectFilesBtn">选择文件</button>
                        </div>
                    </div>

                    <div class="documents-layout">
                        <div class="documents-list">
                            <div class="documents-list-header">
                                <h3>我的文档 (<span id="documentsCount">0</span>)</h3>
                                <div class="documents-filters">
                                    <div class="documents-search">
                                        <input type="text" id="documentSearch" placeholder="搜索文档...">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="11" cy="11" r="8"/>
                                            <path d="m21 21-4.35-4.35"/>
                                        </svg>
                                    </div>
                                    <select id="documentTypeFilter">
                                        <option value="">所有类型</option>
                                        <option value="pdf">PDF</option>
                                        <option value="image">图片</option>
                                        <option value="other">其他</option>
                                    </select>
                                    <button class="secondary-btn" id="clearAllDocuments">清空文档</button>
                                </div>
                            </div>
                            <div id="documentsGrid"></div>
                        </div>
                        <div class="document-preview-panel">
                            <div class="document-preview-header">
                                <div>
                                    <h3 id="previewTitle">预览</h3>
                                    <p id="previewMeta" class="preview-meta">选择一个文档查看详情</p>
                                </div>
                                <div class="preview-actions">
                                    <button class="secondary-btn" id="downloadDocument" disabled>下载</button>
                                    <button class="secondary-btn" id="deleteDocument" disabled>删除</button>
                                </div>
                            </div>
                            <div class="document-preview" id="documentPreview">
                                <div class="preview-placeholder">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
                                        <polyline points="13 2 13 9 20 9"/>
                                    </svg>
                                    <p>选择一个文档开始预览</p>
                                </div>
                            </div>
                            <div class="ocr-panel">
                                <div class="ocr-header">
                                    <h4>OCR 识别内容</h4>
                                    <button class="secondary-btn" id="copyOcrText" disabled>复制文字</button>
                                </div>
                                <div class="ocr-content" id="ocrContent">
                                    <p>当上传图片时，系统会自动识别文字并显示在此处。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mobile Navigation -->
        <nav class="mobile-nav" id="mobileNav">
            <button class="mobile-nav-item" data-view="home">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                </svg>
                <span>首页</span>
            </button>
            <button class="mobile-nav-item" data-view="tutorial">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                </svg>
                <span>教程</span>
            </button>
            <button class="mobile-nav-item" data-view="practice">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 11l3 3L22 4"/>
                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                </svg>
                <span>练习</span>
            </button>
            <button class="mobile-nav-item" data-view="documents">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
                    <polyline points="13 2 13 9 20 9"/>
                </svg>
                <span>文档</span>
            </button>
            <button class="mobile-nav-item" data-view="progress">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="20" x2="12" y2="10"/>
                    <line x1="18" y1="20" x2="18" y2="4"/>
                    <line x1="6" y1="20" x2="6" y2="16"/>
                </svg>
                <span>进度</span>
            </button>
        </nav>

        <!-- Footer -->
        <footer class="footer">
            <p>© 2024 机器人学院 - 服务机器人应用开发在线学习平台</p>
            <p>包含300道练习题，涵盖语音识别、图像处理、机器学习、ROS、SLAM等8大模块</p>
        </footer>
    </div>

    <!-- Question Modal -->
    <div class="modal" id="questionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalQuestionTitle">题目</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modalQuestionContent"></div>
            </div>
            <div class="modal-footer">
                <button id="prevQuestion" class="secondary-btn">上一题</button>
                <button id="submitAnswer" class="cta-btn">提交答案</button>
                <button id="nextQuestion" class="cta-btn">下一题</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script src="document-manager.js"></script>
    <script src="app.js"></script>
</body>
</html>
